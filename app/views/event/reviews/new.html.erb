<h1>Review</h1>

<%= simple_form_for(@review, url: event_review_path, method: :post) do |f| %>
  <div class="event-questions">
    Event Review:
    <% @event_questions.each do |event_question| %>
      <div class="question"><%= event_question.question %></div>
      <div class="question-input">
          <%= render inline: event_question.input("event_question_answers[#{event_question.id}]") %>*
      </div>
    <% end %>
  </div>

  <div class="team-review">
    Team Review:
    <% @team_mates.each do |team_mate| %>
      <div class="individual-review">
        <%= team_mate.name %>
        <% @team_questions.each do |team_question| %>
          <div class="question"><%= team_question.question %></div>
          <div class="question-input">
            <%= render inline: team_question.input("team_review_answers[#{team_mate.id}][#{team_question.id}]") %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <%= f.submit 'Submit', class: "btn btn-default" %>
<% end %>

<script>
  $(document).ready(function()
  {
    var x = document.getElementsByClassName("c-rating");
    var i;
    for (i = 0; i < x.length; i++) {
      var el = x[i];
      //alert(el.childNodes[0].name);
      // current rating, or initial rating
      var currentRating = 0;

      // max rating, i.e. number of stars you want
      var maxRating= 5;

      // callback to run after setting the rating
      var callback = function(rating, star) {
        star.parentNode.childNodes[0].value = rating;
      };

      // rating instance
      var myRating = rating(el, currentRating, maxRating, callback);
    }
  });
</script>
